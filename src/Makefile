# Build the Kademlia cluster node components
# First generate protobuf definitions and then build the project
build-server: server/*
	protoc -I kademliapb/ kademliapb/kademlia.proto --go_out=plugins=grpc:kademliapb && \
	cd server && go build .

# Run all the server tests
server-test: build-server server/*
	cd server && go test -v

# Clean all the files generated by the build process
clean:
	rm -rf server/server
	rm -rf kademliapb/*.pb.go